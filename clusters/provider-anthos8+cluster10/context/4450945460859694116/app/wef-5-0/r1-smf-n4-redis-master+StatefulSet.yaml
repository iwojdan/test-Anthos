{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"smf-n4-redis","chart":"redis-9.2.2","emco/deployment-id":"4450945460859694116-wef-5-0","heritage":"Helm","release":"r1"},"name":"r1-smf-n4-redis-master","namespace":"default"},"spec":{"selector":{"matchLabels":{"app":"smf-n4-redis","release":"r1","role":"master"}},"serviceName":"r1-smf-n4-redis-headless","template":{"metadata":{"annotations":{"checksum/configmap":"72a8da425863a64b7db8f93d60931ebf08447c16721e97ea5b240cf9735741c1","checksum/health":"8396927197db5488f534f7c61105617ba31966da2a6bb78c17243d5c4b375a4d","checksum/secret":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},"labels":{"app":"smf-n4-redis","chart":"redis-9.2.2","emco/deployment-id":"4450945460859694116-wef-5-0","release":"r1","role":"master"}},"spec":{"containers":[{"command":["/bin/bash","-c","if [[ -n $REDIS_PASSWORD_FILE ]]; then\n  password_aux=`cat ${REDIS_PASSWORD_FILE}`\n  export REDIS_PASSWORD=$password_aux\nfi\nif [[ ! -f /opt/bitnami/redis/etc/master.conf ]];then\n  cp /opt/bitnami/redis/mounted-etc/master.conf /opt/bitnami/redis/etc/master.conf\nfi\nif [[ ! -f /opt/bitnami/redis/etc/redis.conf ]];then\n  cp /opt/bitnami/redis/mounted-etc/redis.conf /opt/bitnami/redis/etc/redis.conf\nfi\nARGS=(\"--port\" \"${REDIS_PORT}\")\nARGS+=(\"--protected-mode\" \"no\")\nARGS+=(\"--include\" \"/opt/bitnami/redis/etc/redis.conf\")\nARGS+=(\"--include\" \"/opt/bitnami/redis/etc/master.conf\")\n/run.sh ${ARGS[@]}\n"],"env":[{"name":"REDIS_REPLICATION_MODE","value":"master"},{"name":"ALLOW_EMPTY_PASSWORD","value":"yes"},{"name":"REDIS_PORT","value":"6379"}],"image":"xg-core-delivery-docker-local.artifact.b-com.com/public/docker.io/bitnami/redis:5.0.5-debian-9-r141","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["sh","-c","/health/ping_liveness_local.sh 5"]},"failureThreshold":5,"initialDelaySeconds":5,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":5},"name":"r1-smf-n4-redis","ports":[{"containerPort":6379,"name":"redis"}],"readinessProbe":{"exec":{"command":["sh","-c","/health/ping_readiness_local.sh 5"]},"failureThreshold":5,"initialDelaySeconds":5,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":1},"resources":null,"securityContext":{"runAsUser":1001},"volumeMounts":[{"mountPath":"/health","name":"health"},{"mountPath":"/data","name":"redis-data","subPath":null},{"mountPath":"/opt/bitnami/redis/mounted-etc","name":"config"},{"mountPath":"/opt/bitnami/redis/etc/","name":"redis-tmp-conf"}]}],"imagePullSecrets":[{"name":"registrypullsecret"}],"securityContext":{"fsGroup":1001},"serviceAccountName":"default","volumes":[{"configMap":{"defaultMode":493,"name":"r1-smf-n4-redis-health"},"name":"health"},{"configMap":{"name":"r1-smf-n4-redis"},"name":"config"},{"emptyDir":{},"name":"redis-data"},{"emptyDir":{},"name":"redis-tmp-conf"}]}},"updateStrategy":{"type":"RollingUpdate"}}}
